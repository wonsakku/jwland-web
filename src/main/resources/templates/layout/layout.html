<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
	<title layout:title-pattern="$LAYOUT_TITLE : $CONTENT_TITLE">JW-Land</title>
	<link rel="stylesheet" href="/node_modules/bootstrap/dist/css/bootstrap.min.css" />
	<script src="/node_modules/jquery/dist/jquery.min.js"></script>
	<script src="/node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<!--    <link rel="stylesheet" href="/node_modules/bootstrap/dist/js/bootstrap.bundle.min.js" /> -->
<!--    <link rel="stylesheet" href="/node_modules/jquery/dist/jquery.min.js" />   -->
</head>
<body>

<nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
  <a class="navbar-brand col-md-3 col-lg-2 mr-0 px-3" href="#">JW-Land</a>
  <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-toggle="collapse" data-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
<!--   <input class="form-control form-control-dark w-100" type="text" placeholder="Search" aria-label="Search"> -->
  <ul class="navbar-nav px-3">
    <li class="nav-item text-nowrap">
    	<th:block th:if="${session.account_id == null}">
	    	<a class="nav-link btn btn-primary" href="#" th:href="@{/login}">로그인</a>
	    	<a class="nav-link btn btn-primary" href="#" th:href="@{/join}">회원가입</a>
    	</th:block>
    	<th:block th:if="${session.account_id != null}">
		    <a class="nav-link" href="#">Sign out</a>
    	</th:block>
    </li>
  </ul>
</nav>

<div class="container-fluid">
  <div class="row">
    <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
      <div class="sidebar-sticky pt-3">
        <ul class="nav flex-column" id="sidebar-ul">
        </ul>

<!--         <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"> -->
<!--           <span>Saved reports</span> -->
<!--           <a class="d-flex align-items-center text-muted" href="#" aria-label="Add a new report"> -->
<!--             <span data-feather="plus-circle"></span> -->
<!--           </a> -->
<!--         </h6> -->
<!--         <ul class="nav flex-column mb-2"> -->
<!--           <li class="nav-item"> -->
<!--             <a class="nav-link" href="#"> -->
<!--               <span data-feather="file-text"></span> -->
<!--               Current month -->
<!--             </a> -->
<!--           </li> -->
<!--           <li class="nav-item"> -->
<!--             <a class="nav-link" href="#"> -->
<!--               <span data-feather="file-text"></span> -->
<!--               Last quarter -->
<!--             </a> -->
<!--           </li> -->
<!--           <li class="nav-item"> -->
<!--             <a class="nav-link" href="#"> -->
<!--               <span data-feather="file-text"></span> -->
<!--               Social engagement -->
<!--             </a> -->
<!--           </li> -->
<!--           <li class="nav-item"> -->
<!--             <a class="nav-link" href="#"> -->
<!--               <span data-feather="file-text"></span> -->
<!--               Year-end sale -->
<!--             </a> -->
<!--           </li> -->
<!--         </ul> -->
      </div>
    </nav>

	<!-- 실제 구현해야하는 부분 -->
    <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4" layout:fragment="content">

    </main>
  </div>
</div>


<script type="application/javascript">

	
    (function () {
		load_menu();
    }());
    
    
    function load_menu(){

      var url = "/menu";
      $.ajax({
        url: url,
        method: "GET",
        success: function(data, xhr, status){
          _cb_load_menu(data, xhr, status);
        },
        fail: function(xhr, xhrStatus, err){
          alert(JSON.stringify(xhr));
        }
      });

    }

    function _cb_load_menu(data){
      var menu = data;
      var $sidebar = $("#sidebar-ul");
      $sidebar.html("");

      var menu_length = menu.length;
      var html = "";

      for(var i = 0 ; i < menu_length ; i++){
        html += '<li class="nav-item">';
        html += '<a class="nav-link" href="' + menu[i].url + '">';
        html += menu[i].menu_name;
        html += '</a>';
        html += '</li>';
      }
      $sidebar.html(html);
    }
    
    
</script>
</body>
</html>








